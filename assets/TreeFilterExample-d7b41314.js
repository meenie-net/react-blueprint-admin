import{_ as Z,d as b,T as ue,D as de,f as fe,h as pe,k as K,r as c,l as V,I as W,m as _e,n as he,C as ye,o as Ee,p as me,q as Ne,s as Ce,t as ve,v as ee,w as be,x as De,y as Pe,A as Se,j as _,F as xe}from"./index-edf92eab.js";import{C as Te}from"./card-d3556e38.js";var Oe=function(e){Z(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.handleCaretClick=function(r){var o;r.stopPropagation();var i=t.props,s=i.isExpanded,a=i.onCollapse,l=i.onExpand;(o=s?a:l)===null||o===void 0||o(t,r)},t.handleClick=function(r){var o,i;(i=(o=t.props).onClick)===null||i===void 0||i.call(o,t,r)},t.handleContentRef=function(r){var o,i;(i=(o=t.props).contentRef)===null||i===void 0||i.call(o,t,r)},t.handleContextMenu=function(r){var o,i;(i=(o=t.props).onContextMenu)===null||i===void 0||i.call(o,t,r)},t.handleDoubleClick=function(r){var o,i;(i=(o=t.props).onDoubleClick)===null||i===void 0||i.call(o,t,r)},t.handleMouseEnter=function(r){var o,i;(i=(o=t.props).onMouseEnter)===null||i===void 0||i.call(o,t,r)},t.handleMouseLeave=function(r){var o,i;(i=(o=t.props).onMouseLeave)===null||i===void 0||i.call(o,t,r)},t}return n.ofType=function(){return n},n.prototype.render=function(){var t,r=this.props,o=r.children,i=r.className,s=r.disabled,a=r.icon,l=r.isExpanded,u=r.isSelected,d=r.label,N=b(ue,(t={},t[de]=s,t[fe]=u,t[pe]=l,t),i),x=b(K,"".concat(K,"-").concat(this.props.depth)),ce=s===!0?{}:{onClick:this.handleClick,onContextMenu:this.handleContextMenu,onDoubleClick:this.handleDoubleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave};return c.createElement("li",{className:N},c.createElement("div",V({className:x,ref:this.handleContentRef},ce),this.maybeRenderCaret(),c.createElement(W,{className:_e,icon:a,"aria-hidden":!0,tabIndex:-1}),c.createElement("span",{className:he},d),this.maybeRenderSecondaryLabel()),c.createElement(ye,{isOpen:l},o))},n.prototype.maybeRenderCaret=function(){var t=this.props,r=t.children,o=t.isExpanded,i=t.disabled,s=t.hasCaret,a=s===void 0?c.Children.count(r)>0:s;if(a){var l=b(Ee,o?me:Ne),u=i===!0?void 0:this.handleCaretClick;return c.createElement(W,{title:o?"Collapse group":"Expand group",className:l,onClick:u,icon:"chevron-right"})}return c.createElement("span",{className:Ce})},n.prototype.maybeRenderSecondaryLabel=function(){if(this.props.secondaryLabel!=null)return c.createElement("span",{className:ve},this.props.secondaryLabel)},n.displayName="".concat(ee,".TreeNode"),n}(c.Component),ne=function(e){Z(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.nodeRefs={},t.handleNodeCollapse=function(r,o){t.handlerHelper(t.props.onNodeCollapse,r,o)},t.handleNodeClick=function(r,o){t.handlerHelper(t.props.onNodeClick,r,o)},t.handleContentRef=function(r,o){o!=null?t.nodeRefs[r.props.id]=o:delete t.nodeRefs[r.props.id]},t.handleNodeContextMenu=function(r,o){t.handlerHelper(t.props.onNodeContextMenu,r,o)},t.handleNodeDoubleClick=function(r,o){t.handlerHelper(t.props.onNodeDoubleClick,r,o)},t.handleNodeExpand=function(r,o){t.handlerHelper(t.props.onNodeExpand,r,o)},t.handleNodeMouseEnter=function(r,o){t.handlerHelper(t.props.onNodeMouseEnter,r,o)},t.handleNodeMouseLeave=function(r,o){t.handlerHelper(t.props.onNodeMouseLeave,r,o)},t}return n.ofType=function(){return n},n.nodeFromPath=function(t,r){return t.length===1?r[t[0]]:n.nodeFromPath(t.slice(1),r[t[0]].childNodes)},n.prototype.render=function(){return c.createElement("div",{className:b(be,this.props.className)},this.renderNodes(this.props.contents,[],De))},n.prototype.getNodeContentElement=function(t){return this.nodeRefs[t]},n.prototype.renderNodes=function(t,r,o){var i=this;if(t==null)return null;var s=t.map(function(a,l){var u=r.concat(l);return c.createElement(Oe,V({},a,{key:a.id,contentRef:i.handleContentRef,depth:u.length-1,onClick:i.handleNodeClick,onContextMenu:i.handleNodeContextMenu,onCollapse:i.handleNodeCollapse,onDoubleClick:i.handleNodeDoubleClick,onExpand:i.handleNodeExpand,onMouseEnter:i.handleNodeMouseEnter,onMouseLeave:i.handleNodeMouseLeave,path:u}),i.renderNodes(a.childNodes,u))});return c.createElement("ul",{className:b(Pe,o)},s)},n.prototype.handlerHelper=function(t,r,o){if(Se(t)){var i=n.nodeFromPath(r.props.path,this.props.contents);t(i,r.props.path,o)}},n.displayName="".concat(ee,".Tree"),n}(c.Component),te=Symbol.for("immer-nothing"),U=Symbol.for("immer-draftable"),f=Symbol.for("immer-state");function h(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var C=Object.getPrototypeOf;function v(e){return!!e&&!!e[f]}function E(e){var n;return e?re(e)||Array.isArray(e)||!!e[U]||!!((n=e.constructor)!=null&&n[U])||k(e)||A(e):!1}var Re=Object.prototype.constructor.toString();function re(e){if(!e||typeof e!="object")return!1;const n=C(e);if(n===null)return!0;const t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===Re}function D(e,n){R(e)===0?Object.entries(e).forEach(([t,r])=>{n(t,r,e)}):e.forEach((t,r)=>n(r,t,e))}function R(e){const n=e[f];return n?n.type_:Array.isArray(e)?1:k(e)?2:A(e)?3:0}function F(e,n){return R(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function oe(e,n,t){const r=R(e);r===2?e.set(n,t):r===3?e.add(t):e[n]=t}function ke(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function k(e){return e instanceof Map}function A(e){return e instanceof Set}function y(e){return e.copy_||e.base_}function z(e,n){if(k(e))return new Map(e);if(A(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!n&&re(e))return C(e)?{...e}:Object.assign(Object.create(null),e);const t=Object.getOwnPropertyDescriptors(e);delete t[f];let r=Reflect.ownKeys(t);for(let o=0;o<r.length;o++){const i=r[o],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(C(e),t)}function X(e,n=!1){return g(e)||v(e)||!E(e)||(R(e)>1&&(e.set=e.add=e.clear=e.delete=Ae),Object.freeze(e),n&&D(e,(t,r)=>X(r,!0))),e}function Ae(){h(2)}function g(e){return Object.isFrozen(e)}var ge={};function m(e){const n=ge[e];return n||h(0,e),n}var P;function ie(){return P}function Me(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Y(e,n){n&&(m("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function L(e){I(e),e.drafts_.forEach(we),e.drafts_=null}function I(e){e===P&&(P=e.parent_)}function q(e){return P=Me(P,e)}function we(e){const n=e[f];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function G(e,n){n.unfinalizedDrafts_=n.drafts_.length;const t=n.drafts_[0];return e!==void 0&&e!==t?(t[f].modified_&&(L(n),h(4)),E(e)&&(e=T(n,e),n.parent_||O(n,e)),n.patches_&&m("Patches").generateReplacementPatches_(t[f].base_,e,n.patches_,n.inversePatches_)):e=T(n,t,[]),L(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==te?e:void 0}function T(e,n,t){if(g(n))return n;const r=n[f];if(!r)return D(n,(o,i)=>$(e,r,n,o,i,t)),n;if(r.scope_!==e)return n;if(!r.modified_)return O(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,s=!1;r.type_===3&&(i=new Set(o),o.clear(),s=!0),D(i,(a,l)=>$(e,r,o,a,l,t,s)),O(e,o,!1),t&&e.patches_&&m("Patches").generatePatches_(r,t,e.patches_,e.inversePatches_)}return r.copy_}function $(e,n,t,r,o,i,s){if(v(o)){const a=i&&n&&n.type_!==3&&!F(n.assigned_,r)?i.concat(r):void 0,l=T(e,o,a);if(oe(t,r,l),v(l))e.canAutoFreeze_=!1;else return}else s&&t.add(o);if(E(o)&&!g(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;T(e,o),(!n||!n.scope_.parent_)&&O(e,o)}}function O(e,n,t=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&X(n,t)}function Fe(e,n){const t=Array.isArray(e),r={type_:t?1:0,scope_:n?n.scope_:ie(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=B;t&&(o=[r],i=S);const{revoke:s,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=s,a}var B={get(e,n){if(n===f)return e;const t=y(e);if(!F(t,n))return ze(e,t,n);const r=t[n];return e.finalized_||!E(r)?r:r===M(e.base_,n)?(w(e),e.copy_[n]=H(r,e)):r},has(e,n){return n in y(e)},ownKeys(e){return Reflect.ownKeys(y(e))},set(e,n,t){const r=se(y(e),n);if(r!=null&&r.set)return r.set.call(e.draft_,t),!0;if(!e.modified_){const o=M(y(e),n),i=o==null?void 0:o[f];if(i&&i.base_===t)return e.copy_[n]=t,e.assigned_[n]=!1,!0;if(ke(t,o)&&(t!==void 0||F(e.base_,n)))return!0;w(e),j(e)}return e.copy_[n]===t&&(t!==void 0||n in e.copy_)||Number.isNaN(t)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=t,e.assigned_[n]=!0),!0},deleteProperty(e,n){return M(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,w(e),j(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const t=y(e),r=Reflect.getOwnPropertyDescriptor(t,n);return r&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:r.enumerable,value:t[n]}},defineProperty(){h(11)},getPrototypeOf(e){return C(e.base_)},setPrototypeOf(){h(12)}},S={};D(B,(e,n)=>{S[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});S.deleteProperty=function(e,n){return S.set.call(this,e,n,void 0)};S.set=function(e,n,t){return B.set.call(this,e[0],n,t,e[0])};function M(e,n){const t=e[f];return(t?y(t):e)[n]}function ze(e,n,t){var o;const r=se(n,t);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function se(e,n){if(!(n in e))return;let t=C(e);for(;t;){const r=Object.getOwnPropertyDescriptor(t,n);if(r)return r;t=C(t)}}function j(e){e.modified_||(e.modified_=!0,e.parent_&&j(e.parent_))}function w(e){e.copy_||(e.copy_=z(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Le=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,t,r)=>{if(typeof n=="function"&&typeof t!="function"){const i=t;t=n;const s=this;return function(l=i,...u){return s.produce(l,d=>t.call(this,d,...u))}}typeof t!="function"&&h(6),r!==void 0&&typeof r!="function"&&h(7);let o;if(E(n)){const i=q(this),s=H(n,void 0);let a=!0;try{o=t(s),a=!1}finally{a?L(i):I(i)}return Y(i,r),G(o,i)}else if(!n||typeof n!="object"){if(o=t(n),o===void 0&&(o=n),o===te&&(o=void 0),this.autoFreeze_&&X(o,!0),r){const i=[],s=[];m("Patches").generateReplacementPatches_(n,o,i,s),r(i,s)}return o}else h(1,n)},this.produceWithPatches=(n,t)=>{if(typeof n=="function")return(s,...a)=>this.produceWithPatches(s,l=>n(l,...a));let r,o;return[this.produce(n,t,(s,a)=>{r=s,o=a}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){E(e)||h(8),v(e)&&(e=Ie(e));const n=q(this),t=H(e,void 0);return t[f].isManual_=!0,I(n),t}finishDraft(e,n){const t=e&&e[f];(!t||!t.isManual_)&&h(9);const{scope_:r}=t;return Y(r,n),G(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let t;for(t=n.length-1;t>=0;t--){const o=n[t];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}t>-1&&(n=n.slice(t+1));const r=m("Patches").applyPatches_;return v(e)?r(e,n):this.produce(e,o=>r(o,n))}};function H(e,n){const t=k(e)?m("MapSet").proxyMap_(e,n):A(e)?m("MapSet").proxySet_(e,n):Fe(e,n);return(n?n.scope_:ie()).drafts_.push(t),t}function Ie(e){return v(e)||h(10,e),ae(e)}function ae(e){if(!E(e)||g(e))return e;const n=e[f];let t;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,t=z(e,n.scope_.immer_.useStrictShallowCopy_)}else t=z(e,!0);return D(t,(r,o)=>{oe(t,r,ae(o))}),n&&(n.finalized_=!1),t}var p=new Le,je=p.produce;p.produceWithPatches.bind(p);p.setAutoFreeze.bind(p);p.setUseStrictShallowCopy.bind(p);p.applyPatches.bind(p);p.createDraft.bind(p);p.finishDraft.bind(p);function He(e,n,t){var r=c.useMemo(function(){return je(e)},[e]);return c.useReducer(r,n,t)}function le(e,n){if(e!==void 0)for(const t of e)n(t),le(t.childNodes,n)}function J(e,n,t){t(ne.nodeFromPath(n,e))}function Xe(e,n){switch(n.type){case"DESELECT_ALL":le(e,t=>t.isSelected=!1);break;case"SET_IS_EXPANDED":J(e,n.payload.path,t=>t.isExpanded=n.payload.isExpanded);break;case"SET_IS_SELECTED":return J(e,n.payload.path,t=>{t.isSelected=n.payload.isSelected,t.icon=n.payload.isSelected?_.jsx("input",{type:"checkbox",checked:!0,className:"mr-2",readOnly:!0}):_.jsx("input",{type:"checkbox",className:"mr-2",readOnly:!0}),t.className="tree-bg-none"}),e;default:return e}}const Q=({options:e=[],multiple:n,onChange:t})=>{const r=u=>u.map(d=>{let N=[];return d.childNodes?(N=r(d.childNodes),{...d,icon:n?_.jsx("input",{type:"checkbox",className:"mr-2",readOnly:!0}):null,childNodes:N}):{...d,icon:n?_.jsx("input",{type:"checkbox",className:"mr-2",readOnly:!0}):null}}),[o,i]=He(Xe,e,r),s=(u,d,N)=>{if(u.childNodes&&!n)return;!N.shiftKey&&!n&&i({type:"DESELECT_ALL"});const x=u.isSelected;i({payload:{path:d,multiple:n,isSelected:x==null?!0:!x},type:"SET_IS_SELECTED"})},a=c.useCallback((u,d)=>{i({payload:{path:d,isExpanded:!1},type:"SET_IS_EXPANDED"})},[]),l=c.useCallback((u,d)=>{i({payload:{path:d,isExpanded:!0},type:"SET_IS_EXPANDED"})},[]);return c.useEffect(()=>{t([]),console.log("nodes",o)},[o]),_.jsx(ne,{contents:o,onNodeClick:s,onNodeCollapse:a,onNodeExpand:l,className:xe})},We=()=>{const e=[{id:0,label:"总公司"},{id:1,label:"上海分公司",childNodes:[{id:10,label:"销售部"},{id:11,label:"事业部"},{id:12,label:"人事部"}]},{id:2,label:"广州分公司"}],n=t=>{console.log("res",t)};return _.jsx(Te,{className:"h-full",children:_.jsxs("div",{className:"flex",children:[_.jsx("div",{className:"w-48",children:_.jsx(Q,{options:e,onChange:n})}),_.jsx("div",{className:"w-48",children:_.jsx(Q,{options:e,onChange:n,multiple:!0})})]})})};export{We as default};
